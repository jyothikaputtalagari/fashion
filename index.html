<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LUXE ‚Äî Premium Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0d0d0d;
      --surface: #161616;
      --surface2: #1e1e1e;
      --border: #2a2a2a;
      --gold: #c9a84c;
      --gold-light: #e8c96b;
      --cream: #f5f0e8;
      --text: #e8e8e8;
      --muted: #888;
      --accent: #c9a84c;
      --danger: #e05252;
      --success: #52c47a;
      --radius: 4px;
      --shadow: 0 8px 40px rgba(0,0,0,0.5);
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ---- PAGES ---- */
    .page { display: none; min-height: 100vh; }
    .page.active { display: flex; flex-direction: column; animation: fadeIn .35s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* ---- NAV ---- */
    nav {
      position: sticky; top: 0; z-index: 100;
      background: rgba(13,13,13,0.92);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
      padding: 0 32px;
      display: flex; align-items: center; justify-content: space-between;
      height: 68px;
    }
    .nav-logo {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem; font-weight: 700;
      color: var(--gold); letter-spacing: .12em;
      cursor: pointer;
    }
    .nav-links { display: flex; gap: 32px; }
    .nav-links a {
      color: var(--muted); text-decoration: none;
      font-size: .875rem; font-weight: 500;
      letter-spacing: .05em; text-transform: uppercase;
      transition: color .2s; cursor: pointer;
    }
    .nav-links a:hover, .nav-links a.active { color: var(--gold); }
    .nav-right { display: flex; align-items: center; gap: 20px; }
    .cart-btn {
      position: relative; background: none; border: 1px solid var(--border);
      color: var(--text); padding: 8px 18px;
      border-radius: var(--radius); cursor: pointer;
      font-family: 'DM Sans', sans-serif; font-size: .85rem;
      display: flex; align-items: center; gap: 8px;
      transition: border-color .2s, color .2s;
    }
    .cart-btn:hover { border-color: var(--gold); color: var(--gold); }
    .cart-count {
      background: var(--gold); color: #000;
      border-radius: 50%; width: 20px; height: 20px;
      display: flex; align-items: center; justify-content: center;
      font-size: .7rem; font-weight: 700;
    }

    /* ---- HERO ---- */
    .hero {
      flex: 1; display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: calc(100vh - 68px);
    }
    .hero-content {
      display: flex; flex-direction: column;
      justify-content: center; padding: 80px 64px;
    }
    .hero-eyebrow {
      font-size: .75rem; letter-spacing: .25em;
      text-transform: uppercase; color: var(--gold);
      margin-bottom: 20px;
    }
    .hero-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.8rem, 5vw, 4.5rem);
      line-height: 1.1; font-weight: 700;
      margin-bottom: 24px;
    }
    .hero-title span { color: var(--gold); }
    .hero-desc { color: var(--muted); line-height: 1.7; max-width: 440px; margin-bottom: 40px; }
    .hero-image {
      background: var(--surface);
      display: flex; align-items: center; justify-content: center;
      overflow: hidden; position: relative;
    }
    .hero-image-inner {
      width: 100%; height: 100%;
      background: linear-gradient(135deg, #1a1206 0%, #2a1f08 30%, #1e1608 60%, #141008 100%);
      display: flex; align-items: center; justify-content: center;
    }
    .hero-badge {
      width: 260px; height: 260px; border-radius: 50%;
      border: 1px solid rgba(201,168,76,.3);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      position: relative;
    }
    .hero-badge::before {
      content: ''; position: absolute; inset: 12px;
      border-radius: 50%; border: 1px solid rgba(201,168,76,.15);
    }
    .hero-badge-icon { font-size: 3.5rem; margin-bottom: 12px; }
    .hero-badge-text {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem; color: var(--gold); letter-spacing: .1em;
    }
    .hero-badge-sub { font-size: .75rem; color: var(--muted); margin-top: 4px; }

    /* ---- BUTTONS ---- */
    .btn-primary {
      background: var(--gold); color: #000;
      border: none; padding: 14px 36px;
      font-family: 'DM Sans', sans-serif; font-size: .9rem;
      font-weight: 600; letter-spacing: .08em; text-transform: uppercase;
      cursor: pointer; border-radius: var(--radius);
      transition: background .2s, transform .15s;
      display: inline-flex; align-items: center; gap: 10px;
    }
    .btn-primary:hover { background: var(--gold-light); transform: translateY(-1px); }
    .btn-outline {
      background: transparent; color: var(--gold);
      border: 1px solid var(--gold); padding: 13px 32px;
      font-family: 'DM Sans', sans-serif; font-size: .9rem;
      font-weight: 500; letter-spacing: .06em;
      cursor: pointer; border-radius: var(--radius);
      transition: background .2s, color .2s;
    }
    .btn-outline:hover { background: var(--gold); color: #000; }
    .btn-ghost {
      background: none; border: none; color: var(--muted);
      cursor: pointer; font-family: 'DM Sans', sans-serif;
      font-size: .875rem; padding: 8px 0;
      transition: color .2s;
    }
    .btn-ghost:hover { color: var(--text); }

    /* ---- SECTION ---- */
    .section { padding: 80px 64px; }
    .section-header { text-align: center; margin-bottom: 56px; }
    .section-label {
      font-size: .75rem; letter-spacing: .25em;
      text-transform: uppercase; color: var(--gold);
      margin-bottom: 12px; display: block;
    }
    .section-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.4rem; font-weight: 700;
    }

    /* ---- PRODUCTS GRID ---- */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
    }
    .product-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px; overflow: hidden;
      cursor: pointer;
      transition: border-color .25s, transform .25s, box-shadow .25s;
    }
    .product-card:hover {
      border-color: rgba(201,168,76,.4);
      transform: translateY(-4px);
      box-shadow: 0 16px 48px rgba(0,0,0,.4);
    }
    .product-image {
      height: 240px;
      display: flex; align-items: center; justify-content: center;
      font-size: 4rem;
      background: var(--surface2);
      position: relative;
    }
    .product-badge {
      position: absolute; top: 12px; left: 12px;
      background: var(--gold); color: #000;
      font-size: .65rem; font-weight: 700;
      padding: 4px 10px; border-radius: 2px;
      letter-spacing: .08em; text-transform: uppercase;
    }
    .product-info { padding: 20px; }
    .product-name {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem; margin-bottom: 6px;
    }
    .product-desc { color: var(--muted); font-size: .82rem; margin-bottom: 14px; line-height: 1.5; }
    .product-footer { display: flex; align-items: center; justify-content: space-between; }
    .product-price {
      font-size: 1.1rem; font-weight: 600; color: var(--gold);
    }
    .add-to-cart {
      background: var(--surface2); border: 1px solid var(--border);
      color: var(--text); padding: 7px 14px;
      border-radius: var(--radius); cursor: pointer;
      font-size: .8rem; font-weight: 500;
      transition: background .2s, border-color .2s, color .2s;
    }
    .add-to-cart:hover { background: var(--gold); border-color: var(--gold); color: #000; }

    /* ---- PRODUCT DETAIL ---- */
    .product-detail { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; padding: 64px; flex: 1; }
    .detail-image-wrap {
      background: var(--surface2); border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 8rem; min-height: 480px;
      border: 1px solid var(--border);
    }
    .detail-info { display: flex; flex-direction: column; justify-content: center; }
    .detail-category { font-size: .75rem; letter-spacing: .2em; text-transform: uppercase; color: var(--gold); margin-bottom: 16px; }
    .detail-title { font-family: 'Playfair Display', serif; font-size: 2.6rem; line-height: 1.2; margin-bottom: 20px; }
    .detail-price { font-size: 2rem; font-weight: 600; color: var(--gold); margin-bottom: 24px; }
    .detail-desc { color: var(--muted); line-height: 1.75; margin-bottom: 36px; }
    .qty-selector { display: flex; align-items: center; gap: 16px; margin-bottom: 28px; }
    .qty-btn {
      width: 36px; height: 36px; border-radius: 50%;
      border: 1px solid var(--border); background: none;
      color: var(--text); font-size: 1.1rem; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: border-color .2s, color .2s;
    }
    .qty-btn:hover { border-color: var(--gold); color: var(--gold); }
    .qty-value { font-size: 1.1rem; font-weight: 600; min-width: 28px; text-align: center; }
    .detail-actions { display: flex; gap: 14px; }

    /* ---- CART ---- */
    .cart-layout { display: grid; grid-template-columns: 1fr 380px; gap: 40px; padding: 64px; flex: 1; }
    .cart-items { display: flex; flex-direction: column; gap: 16px; }
    .cart-item {
      display: grid; grid-template-columns: 80px 1fr auto;
      gap: 20px; align-items: center;
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 6px; padding: 20px;
    }
    .cart-item-img {
      background: var(--surface2); border-radius: 4px;
      height: 80px; display: flex; align-items: center;
      justify-content: center; font-size: 2rem;
    }
    .cart-item-name { font-weight: 500; margin-bottom: 4px; }
    .cart-item-price { color: var(--gold); font-size: .9rem; }
    .cart-item-remove { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.2rem; transition: color .2s; }
    .cart-item-remove:hover { color: var(--danger); }
    .cart-summary {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 6px; padding: 32px;
      height: fit-content; position: sticky; top: 100px;
    }
    .summary-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem; margin-bottom: 28px;
    }
    .summary-row {
      display: flex; justify-content: space-between;
      margin-bottom: 16px; font-size: .9rem;
    }
    .summary-row.total {
      border-top: 1px solid var(--border); padding-top: 16px;
      margin-top: 8px; font-size: 1.1rem; font-weight: 600;
    }
    .summary-row.total span:last-child { color: var(--gold); }
    .empty-cart { text-align: center; padding: 80px 0; color: var(--muted); }
    .empty-cart .empty-icon { font-size: 4rem; margin-bottom: 16px; }

    /* ---- CHECKOUT ---- */
    .checkout-layout { display: grid; grid-template-columns: 1fr 380px; gap: 40px; padding: 64px; flex: 1; }
    .checkout-form { display: flex; flex-direction: column; gap: 32px; }
    .form-section-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem; margin-bottom: 20px;
      padding-bottom: 12px; border-bottom: 1px solid var(--border);
    }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .form-field { display: flex; flex-direction: column; gap: 8px; }
    .form-field label { font-size: .8rem; letter-spacing: .06em; text-transform: uppercase; color: var(--muted); }
    .form-field input, .form-field select {
      background: var(--surface); border: 1px solid var(--border);
      color: var(--text); padding: 12px 16px; border-radius: var(--radius);
      font-family: 'DM Sans', sans-serif; font-size: .9rem;
      transition: border-color .2s;
    }
    .form-field input:focus, .form-field select:focus { outline: none; border-color: var(--gold); }
    .form-field select { background-color: var(--surface); cursor: pointer; }
    .place-order-btn {
      width: 100%; padding: 16px; margin-top: 8px;
      font-size: 1rem; letter-spacing: .1em;
    }

    /* ---- ORDER CONFIRMATION ---- */
    .confirmation { flex: 1; display: flex; align-items: center; justify-content: center; padding: 64px; }
    .confirmation-card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 8px; padding: 56px;
      max-width: 600px; width: 100%; text-align: center;
    }
    .confirm-icon { font-size: 4rem; margin-bottom: 24px; }
    .confirm-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem; margin-bottom: 12px;
    }
    .confirm-subtitle { color: var(--muted); margin-bottom: 36px; line-height: 1.6; }
    .confirm-details {
      background: var(--surface2); border-radius: 6px;
      padding: 24px; text-align: left; margin-bottom: 32px;
    }
    .confirm-row {
      display: flex; justify-content: space-between;
      padding: 10px 0; border-bottom: 1px solid var(--border);
      font-size: .9rem;
    }
    .confirm-row:last-child { border-bottom: none; }
    .confirm-row span:first-child { color: var(--muted); }
    .confirm-row span:last-child { font-weight: 500; }

    /* ---- DATA LAYER PANEL ---- */
    .datalayer-panel {
      position: fixed; bottom: 0; right: 0;
      width: 460px; background: #0a0a0a;
      border: 1px solid #2a2a2a; border-right: none; border-bottom: none;
      border-radius: 8px 0 0 0;
      z-index: 9999;
      font-family: 'Courier New', monospace;
      transition: transform .3s ease;
    }
    .datalayer-panel.collapsed { transform: translateY(calc(100% - 44px)); }
    .datalayer-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 16px; background: #111;
      border-radius: 8px 0 0 0; border-bottom: 1px solid #2a2a2a;
      cursor: pointer;
    }
    .datalayer-title { font-size: .75rem; font-weight: 700; color: #c9a84c; letter-spacing: .1em; text-transform: uppercase; }
    .datalayer-toggle {
      background: none; border: none; color: #888;
      cursor: pointer; font-size: .85rem;
      transition: color .2s;
    }
    .datalayer-toggle:hover { color: #c9a84c; }
    .datalayer-body { max-height: 320px; overflow-y: auto; padding: 16px; }
    .datalayer-body::-webkit-scrollbar { width: 4px; }
    .datalayer-body::-webkit-scrollbar-track { background: #111; }
    .datalayer-body::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }
    .dl-event {
      margin-bottom: 12px; padding: 12px;
      background: #111; border: 1px solid #1e1e1e;
      border-radius: 4px; font-size: .72rem;
      line-height: 1.6;
    }
    .dl-event-tag { color: #c9a84c; font-weight: 700; margin-bottom: 6px; font-size: .65rem; letter-spacing: .1em; }
    .dl-key { color: #7dd3b0; }
    .dl-str { color: #e0a870; }
    .dl-num { color: #7aadff; }
    .dl-empty { color: #555; font-size: .75rem; padding: 8px; text-align: center; }

    /* ---- FOOTER ---- */
    footer {
      border-top: 1px solid var(--border); padding: 40px 64px;
      display: flex; justify-content: space-between; align-items: center;
      color: var(--muted); font-size: .82rem;
    }
    .footer-logo { font-family: 'Playfair Display', serif; color: var(--gold); font-size: 1.2rem; }

    /* ---- TOAST ---- */
    .toast-container { position: fixed; top: 80px; right: 24px; z-index: 9998; display: flex; flex-direction: column; gap: 10px; }
    .toast {
      background: var(--surface2); border: 1px solid var(--border);
      border-left: 3px solid var(--gold);
      padding: 12px 20px; border-radius: 4px;
      font-size: .85rem; color: var(--text);
      animation: slideIn .3s ease, fadeOut .3s ease 2.5s forwards;
      max-width: 300px;
    }
    @keyframes slideIn { from { opacity:0; transform: translateX(30px); } to { opacity:1; transform: translateX(0); } }
    @keyframes fadeOut { from { opacity:1; } to { opacity:0; pointer-events:none; } }

    /* ---- PAGE HEADER ---- */
    .page-header {
      padding: 48px 64px 32px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 0;
    }
    .page-header h1 { font-family: 'Playfair Display', serif; font-size: 2rem; }
    .breadcrumb { color: var(--muted); font-size: .8rem; margin-bottom: 8px; }
    .breadcrumb span { color: var(--text); }

    @media (max-width: 900px) {
      .hero { grid-template-columns: 1fr; }
      .hero-image { display: none; }
      .product-detail, .cart-layout, .checkout-layout { grid-template-columns: 1fr; }
      .section { padding: 48px 24px; }
      .datalayer-panel { width: 100%; border-radius: 8px 8px 0 0; border-right: 1px solid #2a2a2a; }
      nav { padding: 0 20px; }
      .nav-links { gap: 16px; }
    }
  </style>
</head>
<body>

<!-- TOAST CONTAINER -->
<div class="toast-container" id="toastContainer"></div>

<!-- DATA LAYER PANEL -->
<div class="datalayer-panel collapsed" id="dlPanel">
  <div class="datalayer-header" onclick="toggleDLPanel()">
    <span class="datalayer-title">üìä DataLayer Monitor</span>
    <button class="datalayer-toggle" id="dlToggleBtn">‚ñ≤ Show</button>
  </div>
  <div class="datalayer-body" id="dlBody">
    <div class="dl-empty">No events yet ‚Äî push events will appear here</div>
  </div>
</div>

<!-- NAVIGATION -->
<nav>
  <div class="nav-logo" onclick="navigate('home')">LUXE</div>
  <div class="nav-links">
    <a id="nav-home" class="active" onclick="navigate('home')">Home</a>
    <a id="nav-shop" onclick="navigate('shop')">Shop</a>
    <a id="nav-cart" onclick="navigate('cart')">Cart</a>
    <a id="nav-checkout" onclick="navigate('checkout')">Checkout</a>
  </div>
  <div class="nav-right">
    <button class="cart-btn" onclick="navigate('cart')">
      üõí Cart <span class="cart-count" id="cartCount">0</span>
    </button>
  </div>
</nav>

<!-- =================== PAGE: HOME =================== -->
<div class="page active" id="page-home">
  <div class="hero">
    <div class="hero-content">
      <div class="hero-eyebrow">New Collection ¬∑ 2025</div>
      <h1 class="hero-title">Crafted for the<br><span>Discerning</span><br>Few</h1>
      <p class="hero-desc">Discover our curated selection of premium goods ‚Äî each piece a testament to exceptional craftsmanship and timeless elegance.</p>
      <div style="display:flex; gap:14px; flex-wrap:wrap;">
        <button class="btn-primary" onclick="navigate('shop')">Explore Collection ‚Üí</button>
        <button class="btn-outline" onclick="navigate('shop')">View All Products</button>
      </div>
    </div>
    <div class="hero-image">
      <div class="hero-image-inner">
        <div class="hero-badge">
          <div class="hero-badge-icon">‚ú¶</div>
          <div class="hero-badge-text">LUXE</div>
          <div class="hero-badge-sub">Premium Collection</div>
        </div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <span class="section-label">Featured Pieces</span>
      <h2 class="section-title">Our Finest Selection</h2>
    </div>
    <div class="products-grid" id="homeFeatured"></div>
  </div>

  <footer>
    <span class="footer-logo">LUXE</span>
    <span>¬© 2025 LUXE Premium Store. All rights reserved.</span>
    <span>GTM DataLayer Integration Enabled</span>
  </footer>
</div>

<!-- =================== PAGE: SHOP =================== -->
<div class="page" id="page-shop">
  <div class="page-header">
    <div class="breadcrumb">Home / <span>Shop</span></div>
    <h1>All Products</h1>
  </div>
  <div class="section" style="padding-top:40px;">
    <div class="products-grid" id="shopGrid"></div>
  </div>
  <footer>
    <span class="footer-logo">LUXE</span>
    <span>¬© 2025 LUXE Premium Store. All rights reserved.</span>
    <span>GTM DataLayer Integration Enabled</span>
  </footer>
</div>

<!-- =================== PAGE: PRODUCT DETAIL =================== -->
<div class="page" id="page-detail">
  <div class="page-header">
    <div class="breadcrumb" id="detailBreadcrumb">Home / Shop / <span id="detailBreadName">Product</span></div>
    <h1 id="detailPageTitle">Product Details</h1>
  </div>
  <div class="product-detail">
    <div class="detail-image-wrap" id="detailImg">üéÅ</div>
    <div class="detail-info">
      <div class="detail-category" id="detailCategory">Category</div>
      <h2 class="detail-title" id="detailName">Product Name</h2>
      <div class="detail-price" id="detailPrice">$0.00</div>
      <p class="detail-desc" id="detailDesc">Description</p>
      <div class="qty-selector">
        <button class="qty-btn" onclick="changeQty(-1)">‚àí</button>
        <span class="qty-value" id="qtyValue">1</span>
        <button class="qty-btn" onclick="changeQty(1)">+</button>
        <span style="color:var(--muted); font-size:.85rem;">units</span>
      </div>
      <div class="detail-actions">
        <button class="btn-primary" onclick="addToCartFromDetail()">Add to Cart</button>
        <button class="btn-outline" onclick="navigate('shop')">‚Üê Back to Shop</button>
      </div>
    </div>
  </div>
</div>

<!-- =================== PAGE: CART =================== -->
<div class="page" id="page-cart">
  <div class="page-header">
    <div class="breadcrumb">Home / <span>Cart</span></div>
    <h1>Your Cart</h1>
  </div>
  <div class="cart-layout">
    <div>
      <div class="cart-items" id="cartItems"></div>
    </div>
    <div class="cart-summary">
      <h3 class="summary-title">Order Summary</h3>
      <div class="summary-row"><span>Subtotal</span><span id="summarySubtotal">$0.00</span></div>
      <div class="summary-row"><span>Shipping</span><span id="summaryShipping">Free</span></div>
      <div class="summary-row"><span>Tax (8%)</span><span id="summaryTax">$0.00</span></div>
      <div class="summary-row total"><span>Total</span><span id="summaryTotal">$0.00</span></div>
      <button class="btn-primary" style="width:100%; margin-top:24px; justify-content:center;" onclick="navigate('checkout')" id="checkoutBtn">Proceed to Checkout</button>
      <button class="btn-ghost" style="width:100%; margin-top:8px; text-align:center;" onclick="navigate('shop')">‚Üê Continue Shopping</button>
    </div>
  </div>
</div>

<!-- =================== PAGE: CHECKOUT =================== -->
<div class="page" id="page-checkout">
  <div class="page-header">
    <div class="breadcrumb">Home / Cart / <span>Checkout</span></div>
    <h1>Secure Checkout</h1>
  </div>
  <div class="checkout-layout">
    <div class="checkout-form">
      <div>
        <h3 class="form-section-title">Contact Information</h3>
        <div class="form-row">
          <div class="form-field"><label>First Name</label><input type="text" id="firstName" placeholder="John" /></div>
          <div class="form-field"><label>Last Name</label><input type="text" id="lastName" placeholder="Doe" /></div>
        </div>
        <div class="form-field" style="margin-top:16px;"><label>Email</label><input type="email" id="email" placeholder="john@example.com" /></div>
      </div>
      <div>
        <h3 class="form-section-title">Shipping Address</h3>
        <div class="form-field"><label>Street Address</label><input type="text" id="address" placeholder="123 Main Street" /></div>
        <div class="form-row" style="margin-top:16px;">
          <div class="form-field"><label>City</label><input type="text" id="city" placeholder="New York" /></div>
          <div class="form-field"><label>ZIP Code</label><input type="text" id="zip" placeholder="10001" /></div>
        </div>
        <div class="form-field" style="margin-top:16px;">
          <label>Country</label>
          <select id="country">
            <option value="US">United States</option>
            <option value="GB">United Kingdom</option>
            <option value="CA">Canada</option>
            <option value="AU">Australia</option>
            <option value="DE">Germany</option>
            <option value="IN">India</option>
          </select>
        </div>
      </div>
      <div>
        <h3 class="form-section-title">Payment Details</h3>
        <div class="form-field"><label>Card Number</label><input type="text" id="cardNum" placeholder="4242 4242 4242 4242" maxlength="19" /></div>
        <div class="form-row" style="margin-top:16px;">
          <div class="form-field"><label>Expiry</label><input type="text" id="expiry" placeholder="MM / YY" maxlength="7" /></div>
          <div class="form-field"><label>CVV</label><input type="text" id="cvv" placeholder="‚Ä¢‚Ä¢‚Ä¢" maxlength="3" /></div>
        </div>
      </div>
      <button class="btn-primary place-order-btn" onclick="placeOrder()">üîí Place Order</button>
    </div>

    <div class="cart-summary" style="position:sticky; top:100px;">
      <h3 class="summary-title">Order Summary</h3>
      <div id="checkoutItems" style="margin-bottom:20px;"></div>
      <div class="summary-row"><span>Subtotal</span><span id="coSubtotal">$0.00</span></div>
      <div class="summary-row"><span>Shipping</span><span>Free</span></div>
      <div class="summary-row"><span>Tax (8%)</span><span id="coTax">$0.00</span></div>
      <div class="summary-row total"><span>Total</span><span id="coTotal">$0.00</span></div>
    </div>
  </div>
</div>

<!-- =================== PAGE: CONFIRMATION =================== -->
<div class="page" id="page-confirmation">
  <div class="confirmation">
    <div class="confirmation-card">
      <div class="confirm-icon">‚úÖ</div>
      <h2 class="confirm-title">Order Confirmed!</h2>
      <p class="confirm-subtitle">Thank you for your purchase. Your order has been received and is being processed. You'll receive a confirmation email shortly.</p>
      <div class="confirm-details">
        <div class="confirm-row"><span>Order ID</span><span id="confOrderId">‚Äî</span></div>
        <div class="confirm-row"><span>Amount</span><span id="confAmount">‚Äî</span></div>
        <div class="confirm-row"><span>Currency</span><span id="confCurrency">‚Äî</span></div>
        <div class="confirm-row"><span>Items</span><span id="confItems">‚Äî</span></div>
        <div class="confirm-row"><span>Status</span><span style="color:var(--success)">‚úì Confirmed</span></div>
      </div>
      <div style="display:flex; gap:12px; justify-content:center;">
        <button class="btn-primary" onclick="navigate('shop')">Continue Shopping</button>
        <button class="btn-outline" onclick="navigate('home')">Back to Home</button>
      </div>
    </div>
  </div>
</div>

<script>
// ============================================================
// INIT DATA LAYER
// ============================================================
window.dataLayer = window.dataLayer || [];

function pushDL(obj) {
  window.dataLayer.push(obj);
  renderDLPanel();
  console.log('[DataLayer Push]', JSON.stringify(obj, null, 2));
}

// ============================================================
// PRODUCT CATALOG
// ============================================================
const PRODUCTS = [
  { id: 'P001', name: 'Obsidian Chronograph', category: 'Watches', price: 1299.00, currency: 'USD', emoji: '‚åö', badge: 'Bestseller', desc: 'Swiss movement, sapphire crystal glass, 48-hour power reserve. A masterpiece of precision engineering.' },
  { id: 'P002', name: 'Cordovan Leather Wallet', category: 'Accessories', price: 245.00, currency: 'USD', emoji: 'üëõ', badge: null, desc: 'Full-grain shell cordovan leather, hand-stitched, ages beautifully with every use.' },
  { id: 'P003', name: 'Merino Field Jacket', category: 'Apparel', price: 680.00, currency: 'USD', emoji: 'üß•', badge: 'New', desc: 'Ultra-fine merino wool blend, waterproof treatment, tailored European fit.' },
  { id: 'P004', name: 'Ceramic Pour-Over Set', category: 'Home', price: 185.00, currency: 'USD', emoji: '‚òï', badge: null, desc: 'Hand-thrown stoneware, food-safe matte glaze, heat-retaining walls for perfect extraction.' },
  { id: 'P005', name: 'Titanium Pen', category: 'Stationery', price: 340.00, currency: 'USD', emoji: '‚úíÔ∏è', badge: 'Limited', desc: 'Grade-5 titanium barrel, German nib, twist mechanism. A writing instrument for generations.' },
  { id: 'P006', name: 'Suede Chelsea Boots', category: 'Footwear', price: 895.00, currency: 'USD', emoji: 'üë¢', badge: null, desc: 'Italian suede upper, Blake stitched sole, Goodyear welt. Classic silhouette, lasting comfort.' },
];

// ============================================================
// STATE
// ============================================================
let cart = [];
let currentProduct = null;
let detailQty = 1;
let lastOrderId = null;
let currentPage = 'home';
const CURRENCY = 'USD';

// ============================================================
// NAVIGATE
// ============================================================
function navigate(page, productId) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));

  const target = document.getElementById('page-' + page);
  if (!target) return;
  target.classList.add('active');
  currentPage = page;

  const navEl = document.getElementById('nav-' + page);
  if (navEl) navEl.classList.add('active');

  window.scrollTo(0, 0);

  if (page === 'home') renderHomeFeatured();
  if (page === 'shop') renderShopGrid();
  if (page === 'detail' && productId) openDetail(productId);
  if (page === 'cart') renderCart();
  if (page === 'checkout') renderCheckout();

  // DataLayer: page_view
  pushDL({ event: 'page_view', page_title: page.charAt(0).toUpperCase() + page.slice(1), page_path: '/' + page });
}

// ============================================================
// RENDER HOME FEATURED
// ============================================================
function renderHomeFeatured() {
  const featured = PRODUCTS.slice(0, 3);
  document.getElementById('homeFeatured').innerHTML = featured.map(p => productCardHTML(p)).join('');
}

function renderShopGrid() {
  document.getElementById('shopGrid').innerHTML = PRODUCTS.map(p => productCardHTML(p)).join('');
}

function productCardHTML(p) {
  return `
    <div class="product-card" onclick="navigate('detail','${p.id}')">
      <div class="product-image">
        <span>${p.emoji}</span>
        ${p.badge ? `<span class="product-badge">${p.badge}</span>` : ''}
      </div>
      <div class="product-info">
        <div class="product-name">${p.name}</div>
        <div class="product-desc">${p.desc}</div>
        <div class="product-footer">
          <span class="product-price">$${p.price.toFixed(2)}</span>
          <button class="add-to-cart" onclick="event.stopPropagation(); addToCart('${p.id}', 1)">+ Add</button>
        </div>
      </div>
    </div>`;
}

// ============================================================
// PRODUCT DETAIL
// ============================================================
function openDetail(id) {
  const p = PRODUCTS.find(x => x.id === id);
  if (!p) return;
  currentProduct = p;
  detailQty = 1;
  document.getElementById('detailImg').textContent = p.emoji;
  document.getElementById('detailCategory').textContent = p.category;
  document.getElementById('detailName').textContent = p.name;
  document.getElementById('detailPageTitle').textContent = p.name;
  document.getElementById('detailBreadName').textContent = p.name;
  document.getElementById('detailPrice').textContent = '$' + p.price.toFixed(2);
  document.getElementById('detailDesc').textContent = p.desc;
  document.getElementById('qtyValue').textContent = 1;

  // DataLayer: view_item
  pushDL({
    event: 'view_item',
    ecommerce: {
      currency: CURRENCY,
      value: p.price,
      items: [{
        item_id: p.id,
        item_name: p.name,
        item_category: p.category,
        price: p.price,
        quantity: 1
      }]
    }
  });
}

function changeQty(delta) {
  detailQty = Math.max(1, detailQty + delta);
  document.getElementById('qtyValue').textContent = detailQty;
}

function addToCartFromDetail() {
  if (!currentProduct) return;
  addToCart(currentProduct.id, detailQty);
}

// ============================================================
// CART LOGIC
// ============================================================
function addToCart(productId, qty) {
  const p = PRODUCTS.find(x => x.id === productId);
  if (!p) return;
  const existing = cart.find(c => c.id === productId);
  if (existing) {
    existing.qty += qty;
  } else {
    cart.push({ ...p, qty });
  }
  updateCartCount();
  showToast(`${p.name} added to cart`);

  // DataLayer: add_to_cart
  pushDL({
    event: 'add_to_cart',
    ecommerce: {
      currency: CURRENCY,
      value: p.price * qty,
      items: [{
        item_id: p.id,
        item_name: p.name,
        item_category: p.category,
        price: p.price,
        quantity: qty
      }]
    }
  });
}

function removeFromCart(productId) {
  const p = cart.find(c => c.id === productId);
  if (!p) return;

  // DataLayer: remove_from_cart
  pushDL({
    event: 'remove_from_cart',
    ecommerce: {
      currency: CURRENCY,
      value: p.price * p.qty,
      items: [{ item_id: p.id, item_name: p.name, price: p.price, quantity: p.qty }]
    }
  });

  cart = cart.filter(c => c.id !== productId);
  updateCartCount();
  renderCart();
}

function updateCartCount() {
  const total = cart.reduce((s, c) => s + c.qty, 0);
  document.getElementById('cartCount').textContent = total;
}

function getSubtotal() { return cart.reduce((s, c) => s + c.price * c.qty, 0); }
function getTax() { return getSubtotal() * 0.08; }
function getTotal() { return getSubtotal() + getTax(); }

// ============================================================
// RENDER CART
// ============================================================
function renderCart() {
  const container = document.getElementById('cartItems');
  if (cart.length === 0) {
    container.innerHTML = `<div class="empty-cart"><div class="empty-icon">üõí</div><p>Your cart is empty</p><button class="btn-primary" style="margin-top:24px;" onclick="navigate('shop')">Start Shopping</button></div>`;
  } else {
    container.innerHTML = cart.map(item => `
      <div class="cart-item">
        <div class="cart-item-img">${item.emoji}</div>
        <div>
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-price">$${item.price.toFixed(2)} √ó ${item.qty}</div>
        </div>
        <div style="display:flex;align-items:center;gap:12px;">
          <span style="color:var(--gold);font-weight:600;">$${(item.price*item.qty).toFixed(2)}</span>
          <button class="cart-item-remove" onclick="removeFromCart('${item.id}')">‚úï</button>
        </div>
      </div>`).join('');
  }
  const sub = getSubtotal(), tax = getTax(), total = getTotal();
  document.getElementById('summarySubtotal').textContent = '$' + sub.toFixed(2);
  document.getElementById('summaryTax').textContent = '$' + tax.toFixed(2);
  document.getElementById('summaryTotal').textContent = '$' + total.toFixed(2);
  document.getElementById('checkoutBtn').disabled = cart.length === 0;
}

// ============================================================
// RENDER CHECKOUT SIDEBAR
// ============================================================
function renderCheckout() {
  const sub = getSubtotal(), tax = getTax(), total = getTotal();
  document.getElementById('coSubtotal').textContent = '$' + sub.toFixed(2);
  document.getElementById('coTax').textContent = '$' + tax.toFixed(2);
  document.getElementById('coTotal').textContent = '$' + total.toFixed(2);

  document.getElementById('checkoutItems').innerHTML = cart.map(item => `
    <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid var(--border);font-size:.85rem;">
      <span>${item.emoji} ${item.name} √ó${item.qty}</span>
      <span style="color:var(--gold);">$${(item.price*item.qty).toFixed(2)}</span>
    </div>`).join('');

  // DataLayer: begin_checkout
  pushDL({
    event: 'begin_checkout',
    ecommerce: {
      currency: CURRENCY,
      value: total,
      items: cart.map(c => ({
        item_id: c.id,
        item_name: c.name,
        item_category: c.category,
        price: c.price,
        quantity: c.qty
      }))
    }
  });
}

// ============================================================
// PLACE ORDER
// ============================================================
function placeOrder() {
  if (cart.length === 0) { showToast('Your cart is empty!'); return; }

  const firstName = document.getElementById('firstName').value.trim();
  const email = document.getElementById('email').value.trim();
  const cardNum = document.getElementById('cardNum').value.trim();
  if (!firstName || !email || !cardNum) {
    showToast('Please fill in all required fields.'); return;
  }

  const transactionId = 'TXN-' + Date.now() + '-' + Math.floor(Math.random() * 9000 + 1000);
  const total = getTotal();
  const tax = getTax();
  const subtotal = getSubtotal();
  lastOrderId = transactionId;

  const items = cart.map(c => ({
    item_id: c.id,
    item_name: c.name,
    item_category: c.category,
    price: c.price,
    quantity: c.qty
  }));

  // ====================================================
  // PURCHASE DATA LAYER EVENT (GA4 ecommerce standard)
  // ====================================================
  pushDL({
    event: 'purchase',
    ecommerce: {
      transaction_id: transactionId,
      value: parseFloat(total.toFixed(2)),
      currency: CURRENCY,
      tax: parseFloat(tax.toFixed(2)),
      shipping: 0,
      items: items
    }
  });

  // Update confirmation page
  document.getElementById('confOrderId').textContent = transactionId;
  document.getElementById('confAmount').textContent = '$' + total.toFixed(2);
  document.getElementById('confCurrency').textContent = CURRENCY;
  document.getElementById('confItems').textContent = cart.reduce((s,c)=>s+c.qty,0) + ' item(s)';

  // Clear cart
  cart = [];
  updateCartCount();

  navigate('confirmation');
  showToast('Order placed successfully! üéâ');
}

// ============================================================
// DATA LAYER PANEL RENDERING
// ============================================================
function renderDLPanel() {
  const body = document.getElementById('dlBody');
  if (window.dataLayer.length === 0) {
    body.innerHTML = '<div class="dl-empty">No events yet</div>';
    return;
  }
  body.innerHTML = [...window.dataLayer].reverse().map((obj, i) => {
    const tag = obj.event || 'push';
    const json = syntaxHighlight(JSON.stringify(obj, null, 2));
    return `<div class="dl-event"><div class="dl-event-tag">#${window.dataLayer.length - i} ‚Äî ${tag.toUpperCase()}</div><pre style="white-space:pre-wrap;word-break:break-word;">${json}</pre></div>`;
  }).join('');
}

function syntaxHighlight(json) {
  return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
    let cls = '<span class="dl-num">';
    if (/^"/.test(match)) {
      if (/:$/.test(match)) cls = '<span class="dl-key">';
      else cls = '<span class="dl-str">';
    }
    return cls + match + '</span>';
  });
}

function toggleDLPanel() {
  const panel = document.getElementById('dlPanel');
  const btn = document.getElementById('dlToggleBtn');
  panel.classList.toggle('collapsed');
  btn.textContent = panel.classList.contains('collapsed') ? '‚ñ≤ Show' : '‚ñº Hide';
}

// ============================================================
// TOAST
// ============================================================
function showToast(msg) {
  const container = document.getElementById('toastContainer');
  const el = document.createElement('div');
  el.className = 'toast';
  el.textContent = msg;
  container.appendChild(el);
  setTimeout(() => el.remove(), 3000);
}

// ============================================================
// CARD NUMBER FORMATTING
// ============================================================
document.getElementById('cardNum').addEventListener('input', function(e) {
  let v = e.target.value.replace(/\D/g, '').substring(0, 16);
  e.target.value = v.match(/.{1,4}/g)?.join(' ') || v;
});
document.getElementById('expiry').addEventListener('input', function(e) {
  let v = e.target.value.replace(/\D/g, '').substring(0, 4);
  if (v.length >= 3) v = v.slice(0, 2) + ' / ' + v.slice(2);
  e.target.value = v;
});

// ============================================================
// INIT
// ============================================================
renderHomeFeatured();
updateCartCount();

// Push initial pageview
pushDL({ event: 'page_view', page_title: 'Home', page_path: '/home' });
</script>
</body>
</html>
